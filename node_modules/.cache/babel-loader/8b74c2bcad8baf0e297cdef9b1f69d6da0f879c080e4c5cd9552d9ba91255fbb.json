{"ast":null,"code":"import { tryCatch } from '../../lib/prelude.js';\nimport { isOperationDefinitionNode } from '../lib/graphql.js';\nimport { parse } from 'graphql';\nimport { print } from 'graphql';\n/**\n * helpers\n */\nconst extractOperationName = document => {\n  let operationName = undefined;\n  const defs = document.definitions.filter(isOperationDefinitionNode);\n  if (defs.length === 1) {\n    operationName = defs[0].name?.value;\n  }\n  return operationName;\n};\nconst extractIsMutation = document => {\n  let isMutation = false;\n  const defs = document.definitions.filter(isOperationDefinitionNode);\n  if (defs.length === 1) {\n    /* eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison --\n     * graphql@15's `OperationTypeNode` is a type, but graphql@16's `OperationTypeNode` is a native TypeScript enum\n     * Therefore, we cannot use `OperationTypeNode.MUTATION` here because it wouldn't work with graphql@15\n     **/\n    isMutation = defs[0].operation === `mutation`;\n  }\n  return isMutation;\n};\nexport const analyzeDocument = (document, excludeOperationName) => {\n  /**\n   * Normalize boxed String objects to primitive strings for compatibility with TypedDocumentString.\n   *\n   * Problem: \\@graphql-codegen with `documentMode: 'string'` generates a TypedDocumentString class that\n   * extends the built-in String class, creating \"boxed String\" instances:\n   *\n   * @see https://github.com/dotansimha/graphql-code-generator/blob/c87b779b9b400813d733fa89dcb16724b30c6d16/packages/plugins/typescript/typed-document-node/src/index.ts#L40-L57\n   *\n   * ```\n   * class TypedDocumentString<TResult, TVariables> extends String\n   *   constructor(value: string)\n   *     super(value)  // Creates a boxed String object, not a primitive string\n   * ```\n   *\n   * Boxed Strings are objects, not primitives:\n   * - `typeof \"hello\" === \"string\"` returns true\n   * - `typeof new String(\"hello\") === \"string\"` returns false (returns \"object\")\n   *\n   * Without normalization, TypedDocumentString instances would fail the `typeof === 'string'` check\n   * and incorrectly be passed to `print()`, which expects a DocumentNode AST, causing a crash.\n   *\n   * Solution: Detect and convert boxed Strings to primitives using template literal coercion.\n   * - Primitive strings pass through (typeof === \"string\")\n   * - DocumentNode objects pass through (have .kind property)\n   * - Boxed Strings get converted to primitives (template literal to primitive string)\n   *\n   * @see https://github.com/graffle-js/graffle/issues/1453\n   */\n  const normalizedDocument = typeof document === `string` || `kind` in document ? document : String(document);\n  const expression = typeof normalizedDocument === `string` ? normalizedDocument : print(normalizedDocument);\n  let isMutation = false;\n  let operationName = undefined;\n  if (excludeOperationName) {\n    return {\n      expression,\n      isMutation,\n      operationName\n    };\n  }\n  const docNode = tryCatch(() => typeof normalizedDocument === `string` ? parse(normalizedDocument) : normalizedDocument);\n  if (docNode instanceof Error) {\n    return {\n      expression,\n      isMutation,\n      operationName\n    };\n  }\n  operationName = extractOperationName(docNode);\n  isMutation = extractIsMutation(docNode);\n  return {\n    expression,\n    operationName,\n    isMutation\n  };\n};","map":{"version":3,"names":["tryCatch","isOperationDefinitionNode","parse","print","extractOperationName","document","operationName","undefined","defs","definitions","filter","length","name","value","extractIsMutation","isMutation","operation","analyzeDocument","excludeOperationName","normalizedDocument","String","expression","docNode","Error"],"sources":["C:\\Users\\porta\\OneDrive\\Documentos\\Univalle\\MercaDEA\\Panel-Amin-Nuevo\\node_modules\\graphql-request\\src\\legacy\\helpers\\analyzeDocument.ts"],"sourcesContent":["import { tryCatch } from '../../lib/prelude.js'\nimport { isOperationDefinitionNode } from '../lib/graphql.js'\nimport type { RequestDocument } from './types.js'\n/**\n * Refactored imports from `graphql` to be more specific, this helps import only the required files (100KiB)\n * instead of the entire package (greater than 500KiB) where tree-shaking is not supported.\n * @see https://github.com/jasonkuhrt/graphql-request/pull/543\n */\nimport type { DocumentNode } from 'graphql'\nimport { parse } from 'graphql'\nimport { print } from 'graphql'\n\n/**\n * helpers\n */\n\nconst extractOperationName = (document: DocumentNode): string | undefined => {\n  let operationName = undefined\n\n  const defs = document.definitions.filter(isOperationDefinitionNode)\n\n  if (defs.length === 1) {\n    operationName = defs[0]!.name?.value\n  }\n\n  return operationName\n}\n\nconst extractIsMutation = (document: DocumentNode): boolean => {\n  let isMutation = false\n\n  const defs = document.definitions.filter(isOperationDefinitionNode)\n\n  if (defs.length === 1) {\n    /* eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison --\n     * graphql@15's `OperationTypeNode` is a type, but graphql@16's `OperationTypeNode` is a native TypeScript enum\n     * Therefore, we cannot use `OperationTypeNode.MUTATION` here because it wouldn't work with graphql@15\n     **/\n    isMutation = defs[0]!.operation === `mutation`\n  }\n\n  return isMutation\n}\n\nexport const analyzeDocument = (\n  document: RequestDocument,\n  excludeOperationName?: boolean,\n): { expression: string; operationName: string | undefined; isMutation: boolean } => {\n  /**\n   * Normalize boxed String objects to primitive strings for compatibility with TypedDocumentString.\n   *\n   * Problem: \\@graphql-codegen with `documentMode: 'string'` generates a TypedDocumentString class that\n   * extends the built-in String class, creating \"boxed String\" instances:\n   *\n   * @see https://github.com/dotansimha/graphql-code-generator/blob/c87b779b9b400813d733fa89dcb16724b30c6d16/packages/plugins/typescript/typed-document-node/src/index.ts#L40-L57\n   *\n   * ```\n   * class TypedDocumentString<TResult, TVariables> extends String\n   *   constructor(value: string)\n   *     super(value)  // Creates a boxed String object, not a primitive string\n   * ```\n   *\n   * Boxed Strings are objects, not primitives:\n   * - `typeof \"hello\" === \"string\"` returns true\n   * - `typeof new String(\"hello\") === \"string\"` returns false (returns \"object\")\n   *\n   * Without normalization, TypedDocumentString instances would fail the `typeof === 'string'` check\n   * and incorrectly be passed to `print()`, which expects a DocumentNode AST, causing a crash.\n   *\n   * Solution: Detect and convert boxed Strings to primitives using template literal coercion.\n   * - Primitive strings pass through (typeof === \"string\")\n   * - DocumentNode objects pass through (have .kind property)\n   * - Boxed Strings get converted to primitives (template literal to primitive string)\n   *\n   * @see https://github.com/graffle-js/graffle/issues/1453\n   */\n  const normalizedDocument = typeof document === `string` || `kind` in document\n    ? document\n    : String(document)\n\n  const expression = typeof normalizedDocument === `string` ? normalizedDocument : print(normalizedDocument)\n\n  let isMutation = false\n  let operationName = undefined\n\n  if (excludeOperationName) {\n    return { expression, isMutation, operationName }\n  }\n\n  const docNode = tryCatch(\n    () => (typeof normalizedDocument === `string` ? parse(normalizedDocument) : normalizedDocument),\n  )\n  if (docNode instanceof Error) {\n    return { expression, isMutation, operationName }\n  }\n\n  operationName = extractOperationName(docNode)\n  isMutation = extractIsMutation(docNode)\n\n  return { expression, operationName, isMutation }\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,sBAAsB;AAC/C,SAASC,yBAAyB,QAAQ,mBAAmB;AAQ7D,SAASC,KAAK,QAAQ,SAAS;AAC/B,SAASC,KAAK,QAAQ,SAAS;AAE/B;;;AAIA,MAAMC,oBAAoB,GAAIC,QAAsB,IAAwB;EAC1E,IAAIC,aAAa,GAAGC,SAAS;EAE7B,MAAMC,IAAI,GAAGH,QAAQ,CAACI,WAAW,CAACC,MAAM,CAACT,yBAAyB,CAAC;EAEnE,IAAIO,IAAI,CAACG,MAAM,KAAK,CAAC,EAAE;IACrBL,aAAa,GAAGE,IAAI,CAAC,CAAC,CAAE,CAACI,IAAI,EAAEC,KAAK;EACtC;EAEA,OAAOP,aAAa;AACtB,CAAC;AAED,MAAMQ,iBAAiB,GAAIT,QAAsB,IAAa;EAC5D,IAAIU,UAAU,GAAG,KAAK;EAEtB,MAAMP,IAAI,GAAGH,QAAQ,CAACI,WAAW,CAACC,MAAM,CAACT,yBAAyB,CAAC;EAEnE,IAAIO,IAAI,CAACG,MAAM,KAAK,CAAC,EAAE;IACrB;;;;IAIAI,UAAU,GAAGP,IAAI,CAAC,CAAC,CAAE,CAACQ,SAAS,KAAK,UAAU;EAChD;EAEA,OAAOD,UAAU;AACnB,CAAC;AAED,OAAO,MAAME,eAAe,GAAGA,CAC7BZ,QAAyB,EACzBa,oBAA8B,KACoD;EAClF;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA4BA,MAAMC,kBAAkB,GAAG,OAAOd,QAAQ,KAAK,QAAQ,IAAI,MAAM,IAAIA,QAAQ,GACzEA,QAAQ,GACRe,MAAM,CAACf,QAAQ,CAAC;EAEpB,MAAMgB,UAAU,GAAG,OAAOF,kBAAkB,KAAK,QAAQ,GAAGA,kBAAkB,GAAGhB,KAAK,CAACgB,kBAAkB,CAAC;EAE1G,IAAIJ,UAAU,GAAG,KAAK;EACtB,IAAIT,aAAa,GAAGC,SAAS;EAE7B,IAAIW,oBAAoB,EAAE;IACxB,OAAO;MAAEG,UAAU;MAAEN,UAAU;MAAET;IAAa,CAAE;EAClD;EAEA,MAAMgB,OAAO,GAAGtB,QAAQ,CACtB,MAAO,OAAOmB,kBAAkB,KAAK,QAAQ,GAAGjB,KAAK,CAACiB,kBAAkB,CAAC,GAAGA,kBAAmB,CAChG;EACD,IAAIG,OAAO,YAAYC,KAAK,EAAE;IAC5B,OAAO;MAAEF,UAAU;MAAEN,UAAU;MAAET;IAAa,CAAE;EAClD;EAEAA,aAAa,GAAGF,oBAAoB,CAACkB,OAAO,CAAC;EAC7CP,UAAU,GAAGD,iBAAiB,CAACQ,OAAO,CAAC;EAEvC,OAAO;IAAED,UAAU;IAAEf,aAAa;IAAES;EAAU,CAAE;AAClD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}