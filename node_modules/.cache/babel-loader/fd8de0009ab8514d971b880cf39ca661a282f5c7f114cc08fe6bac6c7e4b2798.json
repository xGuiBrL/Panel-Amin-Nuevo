{"ast":null,"code":"import { GraphQLClient } from \"graphql-request\";\n\n// Use the project's ngrok-exposed API as the single GraphQL endpoint.\n// The team asked to always target the ngrok URL directly.\nconst endpoint = \"https://3c004bf2d4d8.ngrok-free.app/graphql/\";\n\n// Crear el cliente base sin headers iniciales\nconst baseClient = new GraphQLClient(endpoint);\n\n// Crear un wrapper del cliente que actualice los headers dinámicamente\nexport const client = {\n  request: async (query, variables) => {\n    // Obtener el token actual del localStorage en cada petición\n    const token = localStorage.getItem(\"token\");\n    const headers = token ? {\n      authorization: `Bearer ${token}`\n    } : {};\n\n    // Actualizar headers del cliente antes de cada petición\n    baseClient.setHeaders(headers);\n\n    // Realizar la petición\n    return baseClient.request(query, variables);\n  },\n  // Método para actualizar headers manualmente si es necesario\n  setHeaders: headers => baseClient.setHeaders(headers)\n};","map":{"version":3,"names":["GraphQLClient","endpoint","baseClient","client","request","query","variables","token","localStorage","getItem","headers","authorization","setHeaders"],"sources":["C:/Users/porta/OneDrive/Documentos/Univalle/MercaDEA/Panel-Amin-Nuevo/src/api/graphqlClient.js"],"sourcesContent":["import { GraphQLClient } from \"graphql-request\";\r\n\r\n// Use the project's ngrok-exposed API as the single GraphQL endpoint.\r\n// The team asked to always target the ngrok URL directly.\r\nconst endpoint = \"https://3c004bf2d4d8.ngrok-free.app/graphql/\";\r\n\r\n// Crear el cliente base sin headers iniciales\r\nconst baseClient = new GraphQLClient(endpoint);\r\n\r\n// Crear un wrapper del cliente que actualice los headers dinámicamente\r\nexport const client = {\r\n  request: async (query, variables) => {\r\n    // Obtener el token actual del localStorage en cada petición\r\n    const token = localStorage.getItem(\"token\");\r\n    const headers = token ? { authorization: `Bearer ${token}` } : {};\r\n    \r\n    // Actualizar headers del cliente antes de cada petición\r\n    baseClient.setHeaders(headers);\r\n    \r\n    // Realizar la petición\r\n    return baseClient.request(query, variables);\r\n  },\r\n  \r\n  // Método para actualizar headers manualmente si es necesario\r\n  setHeaders: (headers) => baseClient.setHeaders(headers),\r\n};\r\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,iBAAiB;;AAE/C;AACA;AACA,MAAMC,QAAQ,GAAG,8CAA8C;;AAE/D;AACA,MAAMC,UAAU,GAAG,IAAIF,aAAa,CAACC,QAAQ,CAAC;;AAE9C;AACA,OAAO,MAAME,MAAM,GAAG;EACpBC,OAAO,EAAE,MAAAA,CAAOC,KAAK,EAAEC,SAAS,KAAK;IACnC;IACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,OAAO,GAAGH,KAAK,GAAG;MAAEI,aAAa,EAAE,UAAUJ,KAAK;IAAG,CAAC,GAAG,CAAC,CAAC;;IAEjE;IACAL,UAAU,CAACU,UAAU,CAACF,OAAO,CAAC;;IAE9B;IACA,OAAOR,UAAU,CAACE,OAAO,CAACC,KAAK,EAAEC,SAAS,CAAC;EAC7C,CAAC;EAED;EACAM,UAAU,EAAGF,OAAO,IAAKR,UAAU,CAACU,UAAU,CAACF,OAAO;AACxD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}